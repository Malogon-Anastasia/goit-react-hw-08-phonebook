{"version":3,"sources":["components/Navigation/Navigation.js","components/UserMenu/UserMenu.js","components/AuthNav/AuthNav.js","components/AppBar/AppBar.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","redux/store.js","index.js","components/Navigation/Navigation.module.css","components/AuthNav/AuthNav.module.css","redux/contacts/contacts-selectors.js","redux/contacts/contacts-actions.js","redux/contacts/contacts-operations.js","redux/contacts/contacts-reducer.js","components/Container/Container.js","components/Container/Container.module.css","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","App.module.css"],"names":["Navigation","to","className","isActive","s","active","link","styles","container","display","alignItems","avatar","marginRight","name","fontWeight","UserMenu","dispatch","useDispatch","useSelector","authSelectors","getUsername","style","type","onClick","authOperations","logOut","AuthNav","header","justifyContent","textDecoration","padding","borderBottom","fontSize","AppBar","isLoggedIn","getIsLoggedIn","PrivateRoute","children","redirectTo","PublicRoute","restricted","App","isFetchingCurrentUser","getFetchingCurrent","useEffect","fetchCurrentUser","HomeView","lazy","RegisterView","LoginView","ContactsView","Container","heigth","width","color","arialLabel","fallback","path","element","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","logger","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","module","exports","getContacts","state","items","getFilter","filter","getVisibleContacts","normalizedFilter","toLowerCase","contact","includes","contactsSelectors","getLoading","getTotalContactCount","length","fetchContactsRequest","createAction","fetchContactsSuccess","fetchContactsError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","changeFilter","contactsOperations","fetchContacts","axios","get","then","data","catch","error","message","addContact","number","post","toast","success","deleteContact","id","delete","createReducer","_","payload","console","log","combineReducers","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","logIn","thunkAPI","getState","persistedToken","rejectWithValue","operations","user","authSlice","createSlice","initialState","email","isFetchingCarrentUser","extraReducers","fulfilled","action","pending","rejected"],"mappings":"2OAYeA,EARI,kBACjB,gCACE,cAAC,IAAD,CAASC,GAAG,IAAIC,UAAW,qBAAGC,SAA0BC,IAAEC,OAASD,IAAEE,MAArE,kBAEA,cAAC,IAAD,CAASL,GAAG,YAAYC,UAAW,qBAAGC,SAA0BC,IAAEC,OAASD,IAAEE,MAA7E,0B,OCLEC,EAAS,CACbC,UAAW,CACTC,QAAS,OACTC,WAAY,UAEdC,OAAQ,CACNC,YAAa,GAEfC,KAAM,CACJC,WAAY,IACZF,YAAa,KAIF,SAASG,IACtB,IAAMC,EAAWC,cACXJ,EAAOK,YAAYC,IAAcC,aAEvC,OACE,sBAAKC,MAAOd,EAAOC,UAAnB,UACE,uBAAMa,MAAOd,EAAOM,KAApB,sBAAoCA,KACpC,wBAAQS,KAAK,SAASC,QAAS,kBAAMP,EAASQ,IAAeC,WAA7D,wB,qBCpBS,SAASC,IACtB,OACE,gCACE,cAAC,IAAD,CACEzB,GAAG,YACHC,UAAW,qBAAGC,SAA2BC,IAAEC,OAASD,IAAEE,MAFxD,qBAMA,cAAC,IAAD,CACEL,GAAG,SACHC,UAAW,qBAAGC,SAA2BC,IAAEC,OAASD,IAAEE,MAFxD,wBCNN,IAAMC,EAAS,CACboB,OAAQ,CACNlB,QAAS,OACTmB,eAAgB,gBAChBlB,WAAY,SACZmB,eAAgB,OAChBC,QAAS,GACThB,WAAY,IACZiB,aAAc,oBACdC,SAAU,SAKC,SAASC,IACpB,IAAMC,EAAahB,YAAYC,IAAcgB,eAC7C,OACI,yBAAQd,MAAOd,EAAOoB,OAAtB,UACI,cAAC,EAAD,IACCO,EAAa,cAACnB,EAAD,IAAe,cAACW,EAAD,O,mBCtB1B,SAASU,EAAT,GAAuD,IAA/BC,EAA8B,EAA9BA,SAA8B,IAApBC,kBAAoB,MAAP,IAAO,EAEnE,OADmBpB,YAAYC,IAAcgB,eACzBE,EAAW,cAAC,IAAD,CAAUpC,GAAIqC,ICFhC,SAASC,EAAT,GAIX,IAHFF,EAGC,EAHDA,SAGC,IAFDG,kBAEC,aADDF,kBACC,MADY,IACZ,EAGD,OAFmBpB,YAAYC,IAAcgB,gBACRK,EACb,cAAC,IAAD,CAAUvC,GAAIqC,IAAiBD,E,kBCG1C,SAASI,IAEtB,IAAMzB,EAAWC,cACXyB,EAAwBxB,YAAYC,IAAcwB,oBAExDC,qBAAU,WACR5B,EAASQ,IAAeqB,sBACvB,CAAC7B,IAEJ,IAAM8B,EAAWC,gBAAK,kBACpB,iCAEIC,EAAeD,gBAAK,kBACxB,iCAEIE,EAAYF,gBAAK,kBACrB,iCAEIG,EAAeH,gBAAK,kBACxB,uDAGF,OACE,cAACI,EAAA,EAAD,UACGT,EACC,cAAC,QAAD,CACEU,OAAO,MACPC,MAAM,MACNC,MAAM,OACNC,WAAW,YAEf,qCACA,cAACtB,EAAD,IAEA,cAAC,WAAD,CAAUuB,SACR,cAAC,QAAD,CACEJ,OAAO,MACPC,MAAM,MACNC,MAAM,OACNC,WAAW,YALf,SAOM,eAAC,IAAD,WACE,cAAC,IAAD,CACEE,KAAK,IACLC,QACE,cAACnB,EAAD,UACE,cAACO,EAAD,QAIN,cAAC,IAAD,CACEW,KAAK,YACLC,QACE,cAACnB,EAAD,CAAaC,YAAU,EAAvB,SACE,cAACQ,EAAD,QAIN,cAAC,IAAD,CACES,KAAK,SACLC,QACE,cAACnB,EAAD,CAAaD,WAAW,YAAYE,YAAU,EAA9C,SACE,cAACS,EAAD,QAIN,cAAC,IAAD,CACEQ,KAAK,YACLC,QACE,cAACtB,EAAD,CAAcE,WAAW,SAAzB,SACE,cAACY,EAAD,kB,6DCpEdS,EAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGDC,EAAQC,YAAe,CAClCC,QAAS,CACPC,KAAMC,YAAeR,EAAmBS,KACxCC,SAAUC,KAEZC,WAAY,SAACC,GAAD,OAA0BA,EAAqB,CACzDC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,QAG3DC,OAAOC,MACVC,UAAUC,IAKCC,EAAYC,YAAavB,G,QC7BtCwB,IAASC,OAEP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAU1B,MAAOA,EAAjB,SACE,cAAC,IAAD,CAAa2B,QAAS,KAAML,UAAWA,EAAvC,SACE,cAAC,IAAD,UACE,cAAC5C,EAAD,YAKRkD,SAASC,eAAe,U,mBCnB1BC,EAAOC,QAAU,CAAC,KAAO,yBAAyB,OAAS,oD,mBCA3DD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,OAAS,0B,gCCDxD,sGAAO,IACMC,EAAc,SAAAC,GAAK,OAAIA,EAAM3B,SAAS4B,OACtCC,EAAY,SAAAF,GAAK,OAAIA,EAAM3B,SAAS8B,QAEpCC,EAAqB,SAAAJ,GAChC,IAAM3B,EAAW0B,EAAYC,GAGvBK,EAFSH,EAAUF,GAEOM,cAEhC,OAAOjC,EAAS8B,QAAO,SAAAI,GAAO,OAC5BA,EAAQ1F,KAAKyF,cAAcE,SAASH,OASlCI,EAAoB,CACxBC,WArBwB,SAAAV,GAAK,OAAIA,EAAM3B,SAASqB,SAsBhDQ,YACAE,qBACAO,qBAT2B,SAAAX,GAE3B,OADiBD,EAAYC,GACbY,SAUHH,O,+BC3Bf,+VAEaI,EAAuBC,YAClC,iCAEWC,EAAuBD,YAClC,iCAEWE,EAAqBF,YAAa,+BAElCG,EAAoBH,YAAa,8BACjCI,EAAoBJ,YAAa,8BACjCK,EAAkBL,YAAa,4BAE/BM,EAAuBN,YAClC,iCAEWO,EAAuBP,YAClC,iCAEWQ,EAAqBR,YAAa,+BAElCS,EAAeT,YAAa,0B,gCCtBzC,oCAsDMU,EAAqB,CACzBC,cAzCoB,kBAAM,SAAAzG,GAC1BA,EAAS6F,eAETa,IACGC,IAAI,aACJC,MAAK,gBAAGC,EAAH,EAAGA,KAAH,OAAc7G,EAAS+F,YAAqBc,OACjDC,OAAM,SAAAC,GAAK,OAAI/G,EAASgG,YAAmBe,EAAMC,eAoCpDC,WAhCA,SAAC,GAAD,IAAGpH,EAAH,EAAGA,KAAMqH,EAAT,EAASA,OAAT,OACA,SAAAlH,GACE,IAAMuF,EAAU,CACd1F,OACAqH,UAGFlH,EAASiG,eAETS,IACGS,KAAK,YAAa5B,GAClBqB,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACP7G,EAASkG,YAAkBW,IAC3BO,IAAMC,QAAQ,mCAEfP,OAAM,SAAAC,GAAK,OAAI/G,EAASmG,YAAgBY,EAAMC,eAkBnDM,cAfoB,SAAAC,GAAE,OAAI,SAAAvH,GAC1BA,EAASoG,eAETM,IACGc,OADH,oBACuBD,IACpBX,MAAK,WACJ5G,EAASqG,YAAqBkB,IAC9BH,IAAMC,QAAQ,mCAEfP,OAAM,SAAAC,GAAK,OAAI/G,EAASsG,YAAmBS,EAAMC,gBAQvCR,O,gNC3CT9B,EAAU+C,aAAc,GAAD,mBAC1B5B,KAAuB,kBAAM,KADH,cAE1BE,KAAuB,kBAAM,KAFH,cAG1BC,KAAqB,kBAAM,KAHD,cAI1BC,KAAoB,kBAAM,KAJA,cAK1BC,KAAoB,kBAAM,KALA,cAM1BC,KAAkB,kBAAM,KANE,cAO1BC,KAAuB,kBAAM,KAPH,cAQ1BC,KAAuB,kBAAM,KARH,cAS1BC,KAAqB,kBAAM,KATD,IAYvBrB,EAAQwC,YAAc,IAAD,mBACxB1B,KAAuB,SAAC2B,EAAD,YAAMC,WADL,cAExBzB,KAAoB,SAAClB,EAAD,OAAU2C,EAAV,EAAUA,QAAV,4BAA4B3C,GAA5B,CAAmC2C,OAF/B,cAGxBtB,KAAuB,SAACrB,EAAD,OAAU2C,EAAV,EAAUA,QAAV,OACtB3C,EAAMG,QAAO,qBAAGoC,KAAgBI,QAJT,IAOrBxC,EAASsC,YAAc,GAAD,eACzBlB,KAAe,SAACmB,EAAD,YAAMC,YAGlBZ,EAAQU,YAAc,MAAD,mBACxBzB,KAAqB,SAAC0B,EAAD,OAAMC,EAAN,EAAMA,QAAN,OAAoBP,IAAML,MAAMY,MAD7B,cAExBxB,KAAkB,SAAAY,GAAK,OAAIa,QAAQC,IAAId,MAFf,cAGxBT,KAAqB,SAAAS,GAAK,OAAIa,QAAQC,IAAId,MAHlB,IAMZe,cAAgB,CAC7BpD,UACAO,QACAE,SACA4B,W,8FC/Ca,SAAS5E,EAAT,GAAkC,IAAbd,EAAY,EAAZA,SAClC,OAAO,qBAAKnC,UAAWK,IAAOC,UAAvB,SAAmC6B,M,mBCF5CwD,EAAOC,QAAU,CAAC,UAAY,+B,uNCG9B4B,IAAMqB,SAASC,QAAU,yCAEzB,I,EAAMC,EAAQ,SACRA,GACFvB,IAAMqB,SAASG,QAAQC,OAAOC,cAA9B,iBAAwDH,IAFtDA,EAAQ,WAKVvB,IAAMqB,SAASG,QAAQC,OAAOC,cAAgB,IAS5CC,EAAWC,YAAiB,gBAAD,uCAAkB,WAAMC,GAAN,iBAAAC,EAAA,+EAExB9B,IAAMS,KAAK,gBAAiBoB,GAFJ,uBAEvC1B,EAFuC,EAEvCA,KACRoB,EAAUpB,EAAKoB,OAHgC,kBAIxCpB,GAJwC,gCAM7CO,IAAML,MAAM,KAAMC,SAN2B,yDAAlB,uDAgB3ByB,EAAQH,YAAiB,aAAD,uCAAe,WAAMC,GAAN,iBAAAC,EAAA,+EAElB9B,IAAMS,KAAK,eAAgBoB,GAFT,uBAEjC1B,EAFiC,EAEjCA,KACRoB,EAAUpB,EAAKoB,OAH0B,kBAIlCpB,GAJkC,gCAMvCO,IAAML,MAAM,KAAMC,SANqB,yDAAf,uDAgBxBvG,EAAS6H,YAAiB,cAAD,sBAAgB,sBAAAE,EAAA,+EAErC9B,IAAMS,KAAK,iBAF0B,OAG3Cc,IAH2C,+CAKzCb,IAAML,MAAM,KAAMC,SALuB,yDAkBzCnF,EAAmByG,YACvB,eADuC,uCAEvC,WAAOZ,EAAGgB,GAAV,qBAAAF,EAAA,yDACQxD,EAAQ0D,EAASC,WAGA,QAFjBC,EAAiB5D,EAAM9B,KAAK+E,OAFpC,uBAKIL,QAAQC,IAAI,+HALhB,kBAMWa,EAASG,mBANpB,cASEZ,EAAUW,GATZ,kBAW2BlC,IAAMC,IAAI,kBAXrC,uBAWYE,EAXZ,EAWYA,KAXZ,kBAYWA,GAZX,kCAcMO,IAAML,MAAM,KAAMC,SAdxB,0DAFuC,yDA4B1B8B,EANI,CACjBT,WACA5H,SACAgI,QACA5G,oBCrFa1B,EALO,CACpBgB,cAPoB,SAAA6D,GAAK,OAAIA,EAAM9B,KAAKhC,YAQxCd,YANkB,SAAA4E,GAAK,OAAIA,EAAM9B,KAAK6F,KAAKlJ,MAO3C8B,mBALyB,SAAAqD,GAAK,OAAIA,EAAM9B,KAAKxB,wB,OCuChCsH,EAjCGC,YAAY,CAC5BpJ,KAAM,OACNqJ,aATmB,CACnBH,KAAM,CAAElJ,KAAM,KAAMsJ,MAAO,MAC3BlB,MAAO,KACP/G,YAAY,EACZkI,uBAAuB,GAMvBC,eAAa,mBACV7I,EAAe6H,SAASiB,WADd,SACyBtE,EAAOuE,GACzCvE,EAAM+D,KAAOQ,EAAO5B,QAAQoB,KAC5B/D,EAAMiD,MAAQsB,EAAO5B,QAAQM,MAC7BjD,EAAM9D,YAAa,KAJV,cAMVV,EAAeiI,MAAMa,WANX,SAMsBtE,EAAOuE,GACtCvE,EAAM+D,KAAOQ,EAAO5B,QAAQoB,KAC5B/D,EAAMiD,MAAQsB,EAAO5B,QAAQM,MAC7BjD,EAAM9D,YAAa,KATV,cAWVV,EAAeC,OAAO6I,WAXZ,SAWuBtE,EAAOuE,GACvCvE,EAAM+D,KAAO,CAAElJ,KAAM,KAAMsJ,MAAO,MAClCnE,EAAMiD,MAAQ,KACdjD,EAAM9D,YAAa,KAdV,cAgBVV,EAAeqB,iBAAiB2H,SAhBtB,SAgB+BxE,GACxCA,EAAMtD,uBAAwB,KAjBrB,cAmBVlB,EAAeqB,iBAAiByH,WAnBtB,SAmBiCtE,EAAOuE,GACjDvE,EAAM+D,KAAOQ,EAAO5B,QACpB3C,EAAM9D,YAAa,EACnB8D,EAAMtD,uBAAwB,KAtBrB,cAwBVlB,EAAeqB,iBAAiB4H,UAxBtB,SAwBgCzE,GACzCA,EAAMtD,uBAAwB,KAzBrB,KA8Bf,S,mBC1CAmD,EAAOC,QAAU,CAAC,IAAM,iBAAiB,OAAS,uB","file":"static/js/main.26b76aae.chunk.js","sourcesContent":["import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './Navigation.module.css';\r\n\r\nconst Navigation = () => (\r\n  <nav>\r\n    <NavLink to=\"/\" className={({ isActive }) => isActive ? s.active : s.link}>Home</NavLink>\r\n\r\n    <NavLink to=\"/contacts\" className={({ isActive }) => isActive ? s.active : s.link}>Contacts</NavLink>\r\n  </nav>\r\n);\r\n\r\nexport default Navigation;","import { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    marginRight: 4,\r\n  },\r\n  name: {\r\n    fontWeight: 700,\r\n    marginRight: 12,\r\n  },\r\n};\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <span style={styles.name}>Welcome, {name}</span>\r\n      <button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        Log out\r\n      </button>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './AuthNav.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        className={({ isActive }) => (isActive ? s.active : s.link)}\r\n      >\r\n        Sign up\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        className={({ isActive }) => (isActive ? s.active : s.link)}\r\n      >\r\n        Sign in\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}","import { useSelector } from 'react-redux';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport { authSelectors } from '../../redux/auth';\r\n// import styles from './AppBar.module.css';\r\n\r\nconst styles = {\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    textDecoration: 'none',\r\n    padding: 12,\r\n    fontWeight: 700,\r\n    borderBottom: '1px solid #2A363B',\r\n    fontSize: '18px',\r\n    // backgroundColor: 'orange',\r\n  },\r\n};\r\n\r\nexport default function AppBar() {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    return (\r\n        <header style={styles.header}>\r\n            <Navigation />\r\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n        </header>\r\n    );\r\n}","import { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function PrivateRoute({ children, redirectTo = '/' }) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return isLoggedIn ? children : <Navigate to={redirectTo} />;\r\n}","import { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { authSelectors } from 'redux/auth';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return shouldRedirect ? <Navigate to={redirectTo} /> : children;\r\n}","import { useDispatch, useSelector } from 'react-redux';\r\nimport AppBar from './components/AppBar/AppBar';\r\nimport Container from './components/Container';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport PublicRoute from './components/PublicRoute';\r\nimport { useEffect, lazy, Suspense } from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { Audio } from \"react-loader-spinner\";\r\nimport s from './App.module.css';\r\n\r\nimport { authOperations, authSelectors } from './redux/auth';\r\n\r\n\r\n\r\nexport default function App() {\r\n  \r\n  const dispatch = useDispatch();\r\n  const isFetchingCurrentUser = useSelector(authSelectors.getFetchingCurrent);\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n  \r\n  const HomeView = lazy(() =>\r\n    import('views/HomeView.js' /* webpackChunkName: \"HomeView\" */),\r\n  );\r\n  const RegisterView = lazy(() =>\r\n    import('views/RegisterView.js' /* webpackChunkName: \"RegisterView\" */),\r\n  );\r\n  const LoginView = lazy(() =>\r\n    import('views/LoginView.js' /* webpackChunkName: \"LoginView\" */),\r\n  );\r\n  const ContactsView = lazy(() =>\r\n    import('views/ContactsView.js' /* webpackChunkName: \"ContactsView\" */),\r\n  );\r\n\r\n  return (\r\n    <Container>\r\n      {isFetchingCurrentUser ? (\r\n        <Audio\r\n          heigth=\"300\"\r\n          width=\"300\"\r\n          color='grey'\r\n          arialLabel='loading'/>\r\n      ) : (\r\n      <>\r\n      <AppBar />\r\n\r\n      <Suspense fallback={\r\n        <Audio\r\n          heigth=\"300\"\r\n          width=\"300\"\r\n          color='grey'\r\n          arialLabel='loading'/>\r\n      }>\r\n            <Routes>\r\n              <Route\r\n                path=\"/\"\r\n                element={\r\n                  <PublicRoute>\r\n                    <HomeView />\r\n                  </PublicRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/register\"\r\n                element={\r\n                  <PublicRoute restricted>\r\n                    <RegisterView />\r\n                  </PublicRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/login\"\r\n                element={\r\n                  <PublicRoute redirectTo=\"/contacts\" restricted>\r\n                    <LoginView />\r\n                  </PublicRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/contacts\"\r\n                element={\r\n                  <PrivateRoute redirectTo=\"/login\">\r\n                    <ContactsView />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n            </Routes>\r\n          </Suspense></>)}\r\n    </Container>\r\n  )\r\n}","import { configureStore, } from '@reduxjs/toolkit';\r\nimport logger from 'redux-logger'\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { authReducer } from './auth';\r\nimport { contactsReducer } from './contacts';\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n}\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactsReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER,]\r\n    }\r\n  })\r\n    .concat(logger),\r\n  devTools: process.env.NODE_ENV === 'development',\r\n  \r\n});\r\n\r\n\r\nexport const persistor = persistStore(store);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport './index.css';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport { store, persistor } from './redux/store';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nReactDOM.render(\r\n  \r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__1TLkn\",\"active\":\"Navigation_active__2ho22 Navigation_link__1TLkn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__EmqT-\",\"active\":\"AuthNav_active__1DJ10\"};","export const getLoading = state => state.contacts.loading;\r\nexport const getContacts = state => state.contacts.items;\r\nexport const getFilter = state => state.contacts.filter;\r\n\r\nexport const getVisibleContacts = state => {\r\n  const contacts = getContacts(state);\r\n  const filter = getFilter(state);\r\n\r\n  const normalizedFilter = filter.toLowerCase();\r\n\r\n  return contacts.filter(contact =>\r\n    contact.name.toLowerCase().includes(normalizedFilter),\r\n  );\r\n};\r\n\r\nconst getTotalContactCount = state => {\r\n  const contacts = getContacts(state);\r\n  return contacts.length;\r\n};\r\n\r\nconst contactsSelectors = {\r\n  getLoading,\r\n  getFilter,\r\n  getVisibleContacts,\r\n  getTotalContactCount,\r\n};\r\n\r\nexport default contactsSelectors;","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const fetchContactsRequest = createAction(\r\n  'contacts/fetchContactsRequest',\r\n);\r\nexport const fetchContactsSuccess = createAction(\r\n  'contacts/fetchContactsSuccess',\r\n);\r\nexport const fetchContactsError = createAction('contacts/fetchContactsError');\r\n\r\nexport const addContactRequest = createAction('contacts/addContactRequest');\r\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\r\nexport const addContactError = createAction('contacts/addContactError');\r\n\r\nexport const deleteContactRequest = createAction(\r\n  'contacts/deleteContactRequest',\r\n);\r\nexport const deleteContactSuccess = createAction(\r\n  'contacts/deleteContactSuccess',\r\n);\r\nexport const deleteContactError = createAction('contacts/deleteContactError');\r\n\r\nexport const changeFilter = createAction('contacts/changeFilter');","import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactError,\r\n  deleteContactRequest,\r\n  deleteContactSuccess,\r\n  deleteContactError,\r\n} from './contacts-actions';\r\n\r\nconst fetchContacts = () => dispatch => {\r\n  dispatch(fetchContactsRequest());\r\n\r\n  axios\r\n    .get('/contacts')\r\n    .then(({ data }) => dispatch(fetchContactsSuccess(data)))\r\n    .catch(error => dispatch(fetchContactsError(error.message)));\r\n};\r\n\r\nconst addContact =\r\n  ({ name, number }) =>\r\n  dispatch => {\r\n    const contact = {\r\n      name,\r\n      number,\r\n    };\r\n\r\n    dispatch(addContactRequest());\r\n\r\n    axios\r\n      .post('/contacts', contact)\r\n      .then(({ data }) => {\r\n        dispatch(addContactSuccess(data));\r\n        toast.success('Contact successfully created');\r\n      })\r\n      .catch(error => dispatch(addContactError(error.message)));\r\n  };\r\n\r\nconst deleteContact = id => dispatch => {\r\n  dispatch(deleteContactRequest());\r\n\r\n  axios\r\n    .delete(`/contacts/${id}`)\r\n    .then(() => {\r\n      dispatch(deleteContactSuccess(id));\r\n      toast.success('Contact successfully deleted');\r\n    })\r\n    .catch(error => dispatch(deleteContactError(error.message)));\r\n};\r\n\r\nconst contactsOperations = {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n};\r\nexport default contactsOperations;","import { combineReducers } from 'redux';\r\nimport { createReducer } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-toastify';\r\nimport {\r\n  fetchContactsRequest,\r\n  fetchContactsSuccess,\r\n  fetchContactsError,\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactError,\r\n  deleteContactRequest,\r\n  deleteContactSuccess,\r\n  deleteContactError,\r\n  changeFilter,\r\n} from './contacts-actions';\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContactsRequest]: () => true,\r\n  [fetchContactsSuccess]: () => false,\r\n  [fetchContactsError]: () => false,\r\n  [addContactRequest]: () => true,\r\n  [addContactSuccess]: () => false,\r\n  [addContactError]: () => false,\r\n  [deleteContactRequest]: () => true,\r\n  [deleteContactSuccess]: () => false,\r\n  [deleteContactError]: () => false,\r\n});\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactsSuccess]: (_, { payload }) => payload,\r\n  [addContactSuccess]: (state, { payload }) => [...state, payload],\r\n  [deleteContactSuccess]: (state, { payload }) =>\r\n    state.filter(({ id }) => id !== payload),\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContactsError]: (_, { payload }) => toast.error(payload),\r\n  [addContactError]: error => console.log(error),\r\n  [deleteContactError]: error => console.log(error),\r\n});\r\n\r\nexport default combineReducers({\r\n  loading,\r\n  items,\r\n  filter,\r\n  error,\r\n});","import styles from './Container.module.css';\r\n\r\nexport default function Container({ children }) {\r\n  return <div className={styles.container}>{children}</div>;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3-9M4\"};","import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { toast } from 'react-toastify';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\n/*\r\n * POST @ /users/signup\r\n * body: { name, email, password }\r\n * После успешной регистрации добавляем токен в HTTP-заголовок\r\n */\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n      toast.error(error.message);\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n\r\n/*\r\n * POST @ /users/login\r\n * body: { email, password }\r\n * После успешного логина добавляем токен в HTTP-заголовок\r\n */\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n      toast.error(error.message);\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n\r\n/*\r\n * POST @ /users/logout\r\n * headers: Authorization: Bearer token\r\n * После успешного логаута, удаляем токен из HTTP-заголовка\r\n */\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n      toast.error(error.message);\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n/*\r\n * GET @ /users/current\r\n * headers:\r\n *    Authorization: Bearer token\r\n *\r\n * 1. Забираем токен из стейта через getState()\r\n * 2. Если токена нет, выходим не выполняя никаких операций\r\n * 3. Если токен есть, добавляет его в HTTP-заголовок и выполянем операцию\r\n */\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      console.log('Токена нет, уходим из fetchCurrentUser');\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n        toast.error(error.message);\r\n      // TODO: Добавить обработку ошибки error.message\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getFetchingCurrent = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getFetchingCurrent,\r\n};\r\nexport default authSelectors;","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingCarrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, action) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingCurrentUser = false;\r\n      },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__20WD1\",\"loader\":\"App_loader__39LFI\"};"],"sourceRoot":""}